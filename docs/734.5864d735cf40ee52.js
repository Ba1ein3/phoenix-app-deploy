"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[734],{4734:(W,N,x)=>{x.r(N),x.d(N,{TF3Painter:()=>O});var X=x(4882),o=x(8872),H=x(4355),F=x(8868),B=x(1922),b=x(2843),j=x(4615);function L(A,t,e=0){for(let a=A.length-2;a>=0;--a){const n=t[a],l=t[a+1],d=A[a],P=A[a+1];if(n===e)return d;if(l===e)return P;if(n<e!=l<e)return d+(e-n)/(l-n)*(P-d)}return A[0]-1}class O extends H.TH2Painter{getObjectName(){return this.$func?.fName??"func"}getClassName(){return this.$func?._typename??o.clTF3}isTF1(){return!0}getPrimaryObject(){return this.$func}updateObject(t){if(!t||this.getClassName()!==t._typename)return!1;delete t.evalPar;const e=this.getHisto();if(this.webcanv_hist){const a=this.getPadPainter()?.findInPrimitives("Func",o.clTH2F);a&&this.updateAxes(e,a,this.getFramePainter())}return this.$func=t,this.createTF3Histogram(t,e),this.scanContent(),!0}redraw(t){return!this._use_saved_points&&("logx"===t||"logy"===t||"logy"===t||"zoom"===t)&&(this.createTF3Histogram(this.$func,this.getHisto()),this.scanContent()),super.redraw(t)}createTF3Histogram(t,e){const a=t.fSave.length-9;this._use_saved_points=a>0&&(o.settings.PreferSavedPoints||this.force_saved);const n=this.getFramePainter(),l=this.getPadPainter()?.getRootPad(!0),d=l?.fLogx,P=l?.fLogy,i=n?.getGrFuncs(this.second_x,this.second_y);let r=t.fXmin,y=t.fXmax,z=t.fYmin,S=t.fYmax,M=t.fZmin,c=t.fZmax;i?.zoom_xmin!==i?.zoom_xmax&&(r=Math.min(r,i.zoom_xmin),y=Math.max(y,i.zoom_xmax)),i?.zoom_ymin!==i?.zoom_ymax&&(z=Math.min(z,i.zoom_ymin),S=Math.max(S,i.zoom_ymax)),i?.zoom_zmin!==i?.zoom_zmax&&(M=Math.min(M,i.zoom_zmin),c=Math.max(c,i.zoom_zmax));const D=(m,f)=>{e.fNcells!==(m+2)*(f+2)&&(e.fNcells=(m+2)*(f+2),e.fArray=new Float32Array(e.fNcells)),e.fArray.fill(0),e.fXaxis.fNbins=m,e.fXaxis.fXbins=[],e.fYaxis.fNbins=f,e.fYaxis.fXbins=[],e.fXaxis.fXmin=r,e.fXaxis.fXmax=y,e.fYaxis.fXmin=z,e.fYaxis.fXmax=S,e.fMinimum=M,e.fMaximum=c};if(delete this._fail_eval,!this._use_saved_points){const m=Math.max(t.fNpx,20),f=Math.max(t.fNpy,20),_=Math.max(t.fNpz,20);let h=!1;!t.evalPar&&!(0,F.proivdeEvalPar)(t)&&(h=!0),D(m,f),d&&(0,F.produceTAxisLogScale)(e.fXaxis,m,r,y),P&&(0,F.produceTAxisLogScale)(e.fYaxis,f,z,S);const T=new Array(_),g=new Array(_);for(let s=0;s<_;++s)g[s]=M+s/(_-1)*(c-M);for(let s=0;s<f&&!h;++s)for(let v=0;v<m&&!h;++v){const C=e.fXaxis.GetBinCenter(v+1),u=e.fYaxis.GetBinCenter(s+1);let p=0;try{for(let E=0;E<_;++E)T[E]=t.evalPar(C,u,g[E]);p=L(g,T)}catch{h=!0}h||e.setBinContent(e.getBin(v+1,s+1),Number.isFinite(p)?p:0)}h&&(this._fail_eval=!0),h&&a>0&&(this._use_saved_points=!0)}if(this._use_saved_points){r=t.fSave[a],y=t.fSave[a+1],z=t.fSave[a+2],S=t.fSave[a+3],M=t.fSave[a+4],c=t.fSave[a+5];const m=Math.round(t.fSave[a+6]),f=Math.round(t.fSave[a+7]),_=Math.round(t.fSave[a+8]),h=(c-M)/_;D(m+1,f+1);const T=new Array(_+1),g=new Array(_+1);for(let s=0;s<=_;s++)g[s]=M+s*h;for(let s=0;s<=m;++s)for(let v=0;v<=f;++v){for(let u=0;u<=_;u++)T[u]=t.fSave[s+(m+1)*(v+(f+1)*u)];const C=L(g,T);e.setBinContent(e.getBin(s+1,v+1),Number.isFinite(C)?C:0)}}return e.fName="Func",(0,o.setHistogramTitle)(e,t.fTitle),e.fLineColor=t.fLineColor,e.fLineStyle=t.fLineStyle,e.fLineWidth=t.fLineWidth,e.fFillColor=t.fFillColor,e.fFillStyle=t.fFillStyle,e.fMarkerColor=t.fMarkerColor,e.fMarkerStyle=t.fMarkerStyle,e.fMarkerSize=t.fMarkerSize,e.fBits|=o.kNoStats,e}extractAxesProperties(t){super.extractAxesProperties(t);const e=this.$func,a=e?.fSave.length??0;a>9&&this._use_saved_points&&(this.xmin=Math.min(this.xmin,e.fSave[a-9]),this.xmax=Math.max(this.xmax,e.fSave[a-8]),this.ymin=Math.min(this.ymin,e.fSave[a-7]),this.ymax=Math.max(this.ymax,e.fSave[a-6]),this.zmin=Math.min(this.zmin,e.fSave[a-5]),this.zmax=Math.max(this.zmax,e.fSave[a-4])),e&&(this.xmin=Math.min(this.xmin,e.fXmin),this.xmax=Math.max(this.xmax,e.fXmax),this.ymin=Math.min(this.ymin,e.fYmin),this.ymax=Math.max(this.ymax,e.fYmax),this.zmin=Math.min(this.zmin,e.fZmin),this.zmax=Math.max(this.zmax,e.fZmax))}fillWebObjectOptions(t){t.fcust=this._fail_eval?"func_fail":""}static draw(t,e,a){return(0,X.A)(function*(){(0,o.isStr)(a)||(a="");let n=a.indexOf(";webcanv_hist"),l=!1,d=!1;n>=0&&(l=!0,a=a.slice(0,n)),n=a.indexOf(";force_saved"),n>=0&&(d=!0,a=a.slice(0,n));const P=new b.nC(a);let i;P.empty()||"gl"===a?a="surf1":"SAME"===P.opt&&(a="surf1 same"),(0===a.indexOf("same")||0===a.indexOf("SAME"))&&((0,B.Nn)(t)||(a="A_ADJUST_FRAME_"+a.slice(4))),l&&(i=new B.JW(t).getPadPainter()?.findInPrimitives("Func",o.clTH2F)),i||(i=(0,o.createHistogram)(o.clTH2F,20,20),i.fBits|=o.kNoStats);const r=new O(t,i);return r.$func=e,r.webcanv_hist=l,r.force_saved=d,r.createTF3Histogram(e,i),j.mf._drawHist(r,a)})()}}}}]);
//# sourceMappingURL=734.5864d735cf40ee52.js.map