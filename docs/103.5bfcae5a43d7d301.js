"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[103],{6103:(b,D,h)=>{h.r(D),h.d(D,{TRatioPlotPainter:()=>m});var E=h(4882),P=h(8872),w=h(1922),L=h(4483),X=h(801);class m extends w.JW{setGridsRange(a,t){const d=this.getObject();if(a===t){const o=this.getPadPainter()?.findPainterFor(d.fLowerPad,"lower_pad",P.clTPad)?.getFramePainter()?.x_handle;if(!o)return;a=o.full_min,t=o.full_max}d.fGridlines.forEach(o=>{o.fX1=a,o.fX2=t})}redraw(){var a=this;return(0,E.A)(function*(){const t=a.getObject(),d=a.getPadPainter(),o=d.findPainterFor(t.fTopPad,"top_pad",P.clTPad);o&&o.disablePadDrawing();const f=d.findPainterFor(t.fUpperPad,"upper_pad",P.clTPad),u=f?.getMainPainter(),e=f?.getFramePainter(),p=d.findPainterFor(t.fLowerPad,"lower_pad",P.clTPad),z=p?.getMainPainter(),n=p?.getFramePainter();let s=20,x=Promise.resolve(!0);if(f&&u&&e&&n&&!f._ratio_configured){f._ratio_configured=!0,u.options.Axis=0,s=u.getHisto().fYaxis.fLabelSize,s<1&&(s=Math.round(s*Math.min(f.getPadWidth(),f.getPadHeight())));const _=u.getHisto();_.fXaxis.fLabelSize=0,_.fXaxis.fTitle="",_.fYaxis.fLabelSize=s,_.fYaxis.fTitleSize=s,f.getRootPad().fTicky=1,x=f.redrawPad().then(()=>(e.o_zoom=e.zoom,e._ratio_low_fp=n,e._ratio_painter=a,e.zoom=function(c,g,r,l,i,C){return this.o_zoom(c,g,r,l,i,C).then(T=>(this._ratio_painter.setGridsRange(e.scale_xmin,e.scale_xmax),this._ratio_low_fp.o_zoom(e.scale_xmin,e.scale_xmax),T))},e.o_sizeChanged=e.sizeChanged,e.sizeChanged=function(){this.o_sizeChanged(),this._ratio_low_fp.fX1NDC=this.fX1NDC,this._ratio_low_fp.fX2NDC=this.fX2NDC,this._ratio_low_fp.o_sizeChanged()},!0))}return x.then(()=>{if(!p||!z||!n||!e||p._ratio_configured)return a;p._ratio_configured=!0,z.options.Axis=0;const _=z.getHisto();_.fXaxis.fTitle="x",_.fXaxis.fLabelSize=s,_.fXaxis.fTitleSize=s,_.fYaxis.fLabelSize=s,_.fYaxis.fTitleSize=s,p.getRootPad().fTicky=1,p.forEachPainterInPad(r=>{(0,P.isFunc)(r?.testEditable)&&r.testEditable(!1)});const c=[];let g;return t.fGridlinePositions.length>0&&t.fGridlines.length<t.fGridlinePositions.length&&t.fGridlinePositions.forEach(r=>{let l=!1;if(t.fGridlines.forEach(i=>{i.fY1===i.fY2&&Math.abs(i.fY1-r)<1e-6&&(l=!0)}),!l){const i=(0,P.create)(P.clTLine);i.fX1=e.scale_xmin,i.fX2=e.scale_xmax,i.fY1=i.fY2=r,i.fLineStyle=2,t.fGridlines.push(i),void 0===g&&(g=a.selectCurrentPad(t.fLowerPad.fName)),c.push(X.TLinePainter.draw(a.getDom(),i))}}),Promise.all(c).then(()=>n.zoom(e.scale_xmin,e.scale_xmax)).then(()=>(n.o_zoom=n.zoom,n._ratio_up_fp=e,n._ratio_painter=a,n.zoom=function(r,l,i,C,T,M){return this._ratio_painter.setGridsRange(r,l),this._ratio_up_fp.o_zoom(r,l),this.o_zoom(r,l,i,C,T,M)},n.o_sizeChanged=n.sizeChanged,n.sizeChanged=function(){this.o_sizeChanged(),this._ratio_up_fp.fX1NDC=this.fX1NDC,this._ratio_up_fp.fX2NDC=this.fX2NDC,this._ratio_up_fp.o_sizeChanged()},a))})})()}static draw(a,t,d){return(0,E.A)(function*(){const o=new m(a,t,d);return(0,L.ensureTCanvas)(o,!1).then(()=>o.redraw())})()}}}}]);
//# sourceMappingURL=103.5bfcae5a43d7d301.js.map